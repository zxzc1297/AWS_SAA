# 문제 풀이 노트 (57-60편)

[↩️ 메인으로 돌아가기](../README.md)

---

## 문제 57: 하이브리드 환경에서 RDS 데이터베이스 자격 증명 보안 관리

> **시나리오:**
> Direct Connect로 연결된 온프레미스 애플리케이션이 VPC 내 프라이빗 서브넷의 Amazon RDS for Oracle 데이터베이스에 연결해야 합니다. 보안 정책상 온프레미스 서버에 DB 자격 증명을 저장할 수 없으며, 자격 증명은 AWS에서 중앙 관리되고 자동으로 교체되어야 합니다.
>
> **요구사항:**
> 1.  **안전한 자격 증명 저장:** 자격 증명을 온프레미스 서버에 저장해서는 안 됩니다.
> 2.  **중앙 관리 및 자동 교체:** 자격 증명은 중앙 관리 및 자동 암호 교체가 필수적입니다.
> 3.  **프라이빗 연결:** 자격 증명 조회 및 DB 연결의 전체 과정이 프라이빗 네트워크를 통해서만 이루어져야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 안전하고 효율적인 솔루션은 무엇입니까?
>
> A. **AWS Secrets Manager**에 자격 증명을 저장하고 자동 교체를 구성합니다. VPC에 Secrets Manager용 **인터페이스 VPC 엔드포인트**를 생성하여 온프레미스에서 프라이빗하게 자격 증명을 검색하도록 합니다.
> B. RDS for Oracle 인스턴스에 **IAM 데이터베이스 인증**을 활성화합니다.
> C. 자격 증명을 **AWS Systems Manager Parameter Store**에 `SecureString` 타입으로 저장하고 VPC 엔드포인트를 통해 검색합니다.
> D. Secrets Manager를 사용하되, 자격 증명 검색은 인터넷을 통해 퍼블릭 엔드포인트로 수행합니다.

### 풀이 및 정리

✅ **정답: A**

- **솔루션 분석:** 해결책은 온프레미스 서버에 자격 증명을 저장하지 않고, 자동 교체 및 프라이빗 연결 요구사항을 충족해야 합니다. **AWS Secrets Manager**는 RDS 암호의 네이티브 자동 교체 기능을 제공하며, **인터페이스 VPC 엔드포인트**는 Direct Connect를 통해 프라이빗 연결을 보장합니다. 이 조합이 모든 요구사항을 충족하는 가장 완전한 솔루션입니다. RDS for Oracle은 IAM DB 인증을 지원하지 않으며, Parameter Store는 네이티브 자동 교체 기능이 없습니다.

- **핵심 개념: Secrets Manager vs. Parameter Store**
| 기능 (Feature) | **AWS Secrets Manager** | **AWS Systems Manager Parameter Store (SecureString)** |
| :--- | :--- | :--- |
| **핵심 목적** | **자격 증명(암호, API 키 등)의 수명 주기 관리** | 구성 데이터 및 간단한 암호의 중앙 관리 |
| **자동 교체** | **RDS, DocumentDB 등과 기본 통합되어 자동 교체 지원** | 지원 안 함 (Lambda를 이용해 직접 구현해야 함) |
| **최적 사용 사례** | **데이터베이스 암호, API 키 등 주기적인 교체가 필요한 민감 정보** | 애플리케이션 구성 값, 기능 플래그, 교체가 필요 없는 암호 |


---

## 문제 58: 대규모 병렬 워크로드를 위한 고성능 공유 파일 시스템 선택

> **시나리오:**
> 한 미디어 렌더링 회사는 수백 개의 EC2 인스턴스로 구성된 클러스터에서 대규모 병렬 렌더링 작업을 수행합니다. 모든 인스턴스는 공유 파일 시스템에 동시에 접근하여 초당 수백 GB/s의 매우 높은 처리량이 필요합니다. 이 작업은 며칠 동안만 실행되는 임시 작업이며, 원본 데이터는 S3에 있습니다.
>
> **요구사항:**
> 1.  **최고 성능:** 공유 파일 시스템은 가능한 최고의 처리량과 IOPS를 제공해야 합니다.
> 2.  **S3 통합:** S3로부터 데이터를 효율적으로 로드하고, 결과를 다시 S3로 쓸 수 있어야 합니다.
> 3.  **POSIX 호환:** 파일 시스템은 POSIX와 호환되어야 합니다.
> 4.  **비용 효율성:** 임시적인 작업에 비용 효율적이어야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 적합한 스토리지 솔루션은 무엇입니까?
>
> A. Amazon EFS 파일 시스템을 '탄력적 처리량' 모드로 생성합니다.
> B. Amazon FSx for Windows File Server를 생성합니다.
> C. **Amazon FSx for Lustre** 파일 시스템을 생성하고, 원본 데이터가 있는 S3 버킷에 연결합니다.
> D. 렌더링 애플리케이션이 AWS SDK를 사용하여 Amazon S3에서 직접 파일을 읽고 쓰도록 수정합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** 이 시나리오는 HPC(고성능 컴퓨팅) 워크로드의 전형적인 특징(대규모 병렬 처리, 고성능, 임시 작업)을 보여줍니다. **Amazon FSx for Lustre**는 이러한 HPC 워크로드를 위해 특별히 설계된 서비스입니다. 수백 GB/s의 처리량을 제공하며, S3와 네이티브로 통합되어 S3를 영구 저장소로, FSx for Lustre를 고성능 임시 작업 공간으로 사용하는 비용 효율적인 아키텍처를 구현할 수 있습니다. EFS는 이 정도의 고성능 병렬 처리에는 부적합하며, S3는 POSIX 파일 시스템이 아닙니다.

- **핵심 개념: AWS 공유 파일 시스템 서비스 비교**
| 파일 시스템 (File System) | **Amazon EFS** | **Amazon FSx for Lustre** | **Amazon FSx for Windows** |
| :--- | :--- | :--- | :--- |
| **프로토콜 (Protocol)** | NFSv4 | POSIX / Lustre | SMB |
| **최적 워크로드** | **범용 리눅스 파일 공유**, 웹 서빙, CMS | **HPC, 미디어 렌더링, 머신러닝** 등 고성능 병렬 처리 | **윈도우 기반 애플리케이션**, .NET 앱, MS SQL |
| **성능 특징** | 탄력적, 페타바이트급 확장 | **최고 수준의 처리량(TB/s)과 IOPS** | 높은 처리량 및 IOPS, AD 통합 |
| **S3 통합** | DataSync 등을 통한 연동 | **네이티브(기본) 통합** (S3를 데이터 리포지토리로 사용) | DataSync 등을 통한 연동 |


---

## 문제 59: 3계층(3-Tier) 웹 애플리케이션을 위한 VPC 서브넷 및 라우팅 구성

> **시나리오:**
> 웹 서버용 퍼블릭 서브넷, 애플리케이션 서버용 프라이빗 서브넷, 데이터베이스 서버용 프라이빗 서브넷으로 구성된 3계층 아키텍처가 있습니다.
>
> **요구사항:**
> 1. 웹 서버: 인터넷과 양방향 통신 가능
> 2. 앱 서버: 인터넷에서 직접 접근 불가, 인터넷으로 나가는(Outbound) 통신만 가능
> 3. DB 서버: 인터넷과 완벽히 격리
>
> **문제:**
> 이러한 요구사항을 만족하는 가장 적절한 네트워크 구성은 무엇입니까?
>
> A. 모든 서브넷의 라우팅 테이블에 인터넷 게이트웨이(IGW)로 가는 기본 경로를 추가합니다.
> B. 퍼블릭 서브넷에는 **IGW**로 가는 경로를, 앱 서버 서브넷에는 퍼블릭 서브넷에 위치한 **NAT 게이트웨이**로 가는 경로를, DB 서버 서브넷에는 인터넷 경로를 설정하지 않습니다.
> C. NAT 게이트웨이를 프라이빗 서브넷에 생성합니다.
> D. Egress-Only 인터넷 게이트웨이를 사용하여 IPv4 아웃바운드 트래픽을 제어합니다.

### 풀이 및 정리

✅ **정답: B**

- **솔루션 분석:** 이것은 VPC 3계층 아키텍처의 표준 구성입니다.
    - **퍼블릭 서브넷:** **인터넷 게이트웨이(IGW)**로의 라우팅 경로를 가져 인터넷과 양방향 통신을 담당합니다.
    - **프라이빗 서브넷(앱 계층):** **NAT 게이트웨이**로의 라우팅 경로를 가져, 외부로부터의 직접 접근은 차단하면서 외부 인터넷으로의 아웃바운드 통신(예: 패치 다운로드)만 허용합니다. NAT 게이트웨이 자체는 반드시 퍼블릭 서브넷에 위치해야 합니다.
    - **프라이빗 서브넷(DB 계층):** 인터넷으로 향하는 경로가 전혀 없어 완벽하게 격리됩니다.

- **핵심 개념: VPC 서브넷 유형별 라우팅**
| 서브넷 유형 | **라우팅 테이블의 기본 경로 (0.0.0.0/0)** | **인터넷 연결성** | **주요 사용 사례** |
| :--- | :--- | :--- | :--- |
| **퍼블릭 서브넷** | **인터넷 게이트웨이(IGW)**로 향함 | **양방향 (Inbound & Outbound)** | 웹 서버, Bastion Host, NAT 게이트웨이 |
| **프라이빗 서브넷** | **NAT 게이트웨이(NAT GW)**로 향함 | **단방향 (Outbound-Only)** | 애플리케이션 서버, 배치 처리 인스턴스 |
| **격리된 서브넷** | **기본 경로 없음** | **인터넷 연결 없음** | 데이터베이스 서버, 매우 민감한 데이터 처리 |


---

## 문제 60: S3 Glacier Deep Archive의 반복적인 데이터 검색 비용 최적화

> **시나리오:**
> 한 미디어 회사는 대용량 비디오 아카이브를 비용 최소화를 위해 S3 Glacier Deep Archive에 저장합니다. 하지만 내부 프로듀서들이 특정 인기 클립을 반복적으로 복원하면서, 비싼 데이터 검색 비용이 누적되고 있습니다.
>
> **요구사항:**
> 1.  **검색 비용 절감:** 반복적인 검색 비용을 최소화해야 합니다.
> 2.  **사용자 경험 개선:** 한번 복원된 파일은 이후 즉시 접근 가능해야 합니다.
> 3.  **낮은 스토리지 비용 유지:** 전체 아카이브는 가장 저렴한 계층에 유지되어야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 효과적인 솔루션은 무엇입니까?
>
> A. 파일 복원 시 임시 복사본의 사용 가능 기간을 30일로 길게 설정합니다.
> B. 전체 아카이브를 S3 Glacier Instant Retrieval 스토리지 클래스로 마이그레이션합니다.
> C. **S3 Standard**를 사용하는 별도의 "핫(Hot)" S3 버킷을 캐시 용도로 생성합니다. 파일이 복원되면 이 "핫" 버킷으로 객체를 복사하고, 이후 모든 요청은 "핫" 버킷에서 처리합니다.
> D. S3 Glacier Deep Archive 버킷 앞에 Amazon CloudFront를 배포합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** 이 솔루션은 스토리지 계층 자체를 캐시로 활용하는 비용 최적화 패턴입니다. 대다수의 데이터는 가장 저렴한 **S3 Glacier Deep Archive**에 유지하여 스토리지 비용을 최소화합니다. 자주 접근하는 파일이 복원될 때, 이 파일을 즉시 접근 가능한 **S3 Standard** 버킷에 복사해 둡니다. 이후 해당 파일에 대한 요청은 S3 Standard 버킷에서 처리함으로써, 비싼 Glacier 검색 비용의 반복 발생을 원천적으로 차단하고 사용자에게는 빠른 접근성을 제공합니다. CloudFront는 Glacier의 긴 복원 시간을 처리할 수 없어 이 시나리오에 부적합합니다.

- **핵심 개념: 스토리지 계층을 이용한 캐싱 패턴**
| 계층 (Tier) | 역할 | AWS 서비스 예시 | 비용 프로필 |
| :--- | :--- | :--- | :--- |
| **Hot Tier (캐시)** | 자주 액세스하는 데이터의 빠른 제공 | **S3 Standard** | 보관 비용은 높으나, 검색 비용은 낮음 |
| **Cold Tier (원본)** | 모든 데이터의 저비용 장기 보관 | **S3 Glacier Deep Archive** | 보관 비용은 매우 낮으나, 검색 비용은 높음 |

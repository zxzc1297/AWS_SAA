# 문제 풀이 노트 (65-68편)

[↩️ 메인으로 돌아가기](../README.md)

---

## 문제 65: OLTP와 OLAP 워크로드 분리를 통한 RDS 성능 최적화

> **시나리오:**
> 한 회사의 이커머스 플랫폼 데이터베이스(RDS for MySQL, Multi-AZ)가 고객의 주문 처리(OLTP)와 내부 BI팀의 분석 쿼리(OLAP)를 모두 처리하고 있습니다. 무거운 분석 쿼리로 인해 고객 트랜잭션 성능이 저하되는 문제가 발생하고 있습니다. BI팀은 최대 몇 분 지연 이내의 최신 데이터 조회가 필요합니다.
>
> **요구사항:**
> 1.  **워크로드 격리:** 분석 쿼리를 프로덕션 OLTP 트래픽으로부터 격리해야 합니다.
> 2.  **데이터 최신성:** BI팀은 최대 몇 분 정도의 지연 시간 이내의 최신 데이터에 대해 쿼리할 수 있어야 합니다.
> 3.  **무중단:** 솔루션은 기본 데이터베이스의 다운타임 없이 구현되어야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 적절한 솔루션은 무엇입니까?
>
> A. 기본 DB 인스턴스로부터 **Amazon RDS 읽기 전용 복제본(Read Replica)**을 생성하고, BI팀의 모든 쿼리가 이 복제본을 사용하도록 변경합니다.
> B. 기본 RDS 인스턴스를 더 큰 인스턴스 클래스로 수직 확장(Scale-up)합니다.
> C. 기본 RDS 인스턴스의 일일 스냅샷을 생성하여 새 인스턴스로 복원하고, BI팀이 이 복원된 인스턴스를 사용하게 합니다.
> D. BI 도구가 다중 AZ(Multi-AZ) 배포의 예비(Standby) 인스턴스에 직접 연결하여 쿼리를 실행하도록 수정합니다.

### 풀이 및 정리

✅ **정답: A**

- **솔루션 분석:** 해결책은 OLTP 워크로드에 영향을 주는 OLAP 쿼리를 격리해야 합니다. **Amazon RDS 읽기 전용 복제본(Read Replica)**은 원본과 비동기식으로 복제되는 별도의 인스턴스를 생성하여 읽기 전용 트래픽을 분산시키는 데 최적화된 솔루션입니다. 이를 통해 워크로드를 효과적으로 격리하고 데이터 최신성 요구사항을 충족할 수 있습니다. 다중 AZ의 예비 인스턴스는 고가용성을 위한 수동 대기 상태이므로 읽기용으로 사용할 수 없습니다.

- **핵심 개념: RDS 다중 AZ vs. 읽기 전용 복제본**
| 구분              | **다중 AZ (Multi-AZ)** | **읽기 전용 복제본 (Read Replica)** |
| :---------------- | :----------------------- | :------------------------------------ |
| **주요 목적** | **고가용성 (HA)**, 재해 복구 | **성능 향상 (Read-heavy 워크로드 확장)**, 워크로드 분리 |
| **복제 방식** | **동기식 (Synchronous)** | **비동기식 (Asynchronous)** |
| **예비/복제본 상태** | **수동 대기 (Passive)**, 직접 접근 불가 | **활성 상태 (Active)**, 읽기 쿼리 처리 가능 |


---

## 문제 66: AWS 리소스 변경 사항 추적 및 규정 준수 감사

> **시나리오:**
> 한 금융 서비스 회사는 보안 감사를 위해 "누가 S3 버킷을 삭제했는가?", "보안 그룹 규칙이 변경 전에는 어떠했는가?", "현재 퍼블릭 S3 버킷이 있는가?"와 같은 질문에 신속히 답변해야 합니다.
>
> **요구사항:**
> 1.  **감사 추적:** 모든 AWS 계정에서 발생한 모든 API 호출 로그를 남겨야 합니다.
> 2.  **구성 기록:** 모든 AWS 리소스의 구성 변경 기록을 유지해야 합니다.
> 3.  **규정 준수 모니터링:** 리소스가 보안 정책을 준수하는지 자동으로 검사해야 합니다.
> 4.  **중앙 집중식 로깅:** 모든 로그와 감사 결과는 중앙 보안 계정으로 집계되어야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 포괄적인 솔루션은 무엇입니까?
>
> A. **AWS CloudTrail** 조직 추적을 생성하여 중앙 S3 버킷으로 로그를 전송합니다.
> B. 모든 VPC에 **VPC Flow Logs**를 활성화하고, CloudTrail을 함께 사용합니다.
> C. **AWS Config**를 활성화하고 중앙 계정에 집계기를 설정하여 규정 준수 규칙을 배포합니다. 이와 동시에, **CloudTrail** 조직 추적을 생성하여 API 이벤트 로그를 중앙 S3 버킷으로 보냅니다.
> D. 각 계정의 **Amazon CloudWatch** Logs를 구성하고 중앙 계정에서 경보를 생성합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** 이 시나리오는 '행위(Action)'에 대한 감사와 '상태(State)'에 대한 감사를 모두 요구합니다. **AWS CloudTrail**은 "누가 무엇을 했는가"라는 행위 기반의 API 호출 이벤트를 기록하는 데 사용됩니다. 반면 **AWS Config**는 "리소스가 어떻게 구성되어 있는가"와 "규정을 준수하는가"라는 상태 기반의 감사 및 규정 준수 검사에 사용됩니다. 두 가지 요구사항을 모두 충족하려면 두 서비스를 함께 사용해야 합니다.

- **핵심 개념: AWS CloudTrail vs. AWS Config**
| 구분 (Category) | **AWS CloudTrail** | **AWS Config** |
| :--- | :--- | :--- |
| **핵심 질문** | **"누가, 무엇을, 언제 했는가?"** | **"리소스가 어떻게 생겼는가? 규칙을 지키고 있는가?"** |
| **기록 대상** | **API 호출 이벤트 (Event)** - '행위'의 기록 | **리소스의 구성 상태 및 변경 이력 (State)** - '상태'의 기록 |
| **주요 사용 사례** | 보안 분석, 운영 문제 해결, 활동 추적 | **규정 준수 감사**, 변경 관리, 리소스 인벤토리 |


---

## 문제 67: 인터넷 연결이 불안정한 IoT 기기의 데이터 수집 아키텍처

> **시나리오:**
> 한 물류 회사는 트럭에 설치된 GPS 장치로 위치를 추적합니다. 트럭이 터널 등 통신이 불안정한 곳을 지날 때 데이터가 유실되는 문제가 발생하고 있습니다. 네트워크가 복구되면 저장된 데이터를 한꺼번에 업로드할 수 있어야 합니다.
>
> **요구사항:**
> 1.  **데이터 내구성:** 네트워크 단절 시에도 데이터가 유실되어서는 안 됩니다.
> 2.  **확장 가능한 수집:** 데이터 폭증을 처리할 수 있어야 합니다.
> 3.  **순서 보존:** 데이터는 생성된 순서와 거의 비슷하게 처리되어야 합니다.
> 4.  **분리된 아키텍처:** 데이터 수집과 처리는 분리되어야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 탄력적인 아키텍처는 무엇입니까?
>
> A. GPS 장치가 DynamoDB 테이블에 직접 쓰도록 시도하고 실패 시 재시도합니다.
> B. 각 GPS 장치를 **AWS IoT Core**에 온보딩하고, MQTT 토픽으로 데이터를 발행합니다. **AWS IoT Device SDK**가 오프라인 시 메시지 큐잉을 처리하고, **IoT 규칙**을 통해 메시지를 **SQS 대기열**로 전달합니다.
> C. GPS 장치가 위치 데이터를 **Amazon Kinesis Video Streams**로 보내도록 구성합니다.
> D. GPS 장치는 데이터를 로컬 파일에 기록하고, 하루 일과 후 **AWS DataSync**를 사용해 S3로 전송합니다.

### 풀이 및 정리

✅ **정답: B**

- **솔루션 분석:** 이 시나리오는 간헐적인 네트워크 연결을 가진 IoT 기기로부터 데이터를 안정적으로 수집하는 것이 핵심입니다. **AWS IoT Device SDK**는 오프라인 큐잉 기능을 내장하여 기기 레벨에서 데이터 유실을 방지합니다. **AWS IoT Core**는 수백만 기기를 위한 확장 가능한 수집 엔드포인트 역할을 하며, **SQS**는 수집된 데이터를 백엔드가 처리하기 전에 안전하게 보관하는 클라우드 레벨의 버퍼 역할을 합니다. 이 조합이 가장 탄력적인 솔루션입니다.

- **핵심 개념: 탄력적인 IoT 데이터 수집 패턴**
| 계층 | 역할 | AWS 서비스 예시 |
| :--- | :--- | :--- |
| **엣지 (기기)** | 오프라인 버퍼링 | **AWS IoT Device SDK** |
| **클라우드 (수집)** | 확장 가능한 엔드포인트 | **AWS IoT Core** |
| **클라우드 (버퍼)** | 백엔드 보호 및 비동기 처리 | **Amazon SQS**, **Amazon Kinesis** |


---

## 문제 68: 정적 및 동적 콘텐츠를 모두 사용하는 글로벌 웹사이트 성능 최적화

> **시나리오:**
> 서울 리전에서 운영 중인 동적 뉴스 웹사이트가 있습니다. 정적 자산(이미지, CSS 등)도 동일한 EC2 인스턴스에서 제공하고 있어, 해외 사용자의 페이지 로딩이 느리고 EC2의 부하가 가중되고 있습니다. 홈페이지의 동적 콘텐츠는 5분마다 변경됩니다.
>
> **요구사항:**
> 1.  **성능 개선:** 글로벌 사용자의 페이지 로딩 시간을 대폭 단축해야 합니다.
> 2.  **정적 콘텐츠 오프로드:** 정적 자산 제공 작업을 EC2 인스턴스에서 분리해야 합니다.
> 3.  **동적 콘텐츠 캐싱:** 동적 콘텐츠를 짧은 시간 동안 캐싱해야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 효과적인 솔루션은 무엇입니까?
>
> A. Application Load Balancer에 캐싱 기능을 설정합니다.
> B. 모든 정적 자산을 Amazon S3 버킷으로 이전합니다.
> C. 모든 정적 자산을 **S3 버킷**으로 이전하고, **Amazon CloudFront** 배포를 생성하여 **두 개의 오리진(S3와 ALB)**을 설정합니다. 경로 패턴에 따라 정적 콘텐츠는 S3에서, 동적 콘텐츠는 ALB에서 가져오도록 하고 각각 다른 TTL로 캐싱합니다.
> D. Application Load Balancer 앞에 **AWS Global Accelerator**를 배포합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** 이 솔루션은 **Amazon CloudFront**의 다중 오리진 및 캐시 동작 기능을 활용하여 모든 요구사항을 해결합니다. 정적 자산은 S3로 이전하여 EC2 부하를 줄이고, S3를 CloudFront의 오리진으로 설정하여 글로벌 엣지 네트워크에 캐싱합니다. 동시에, ALB를 또 다른 오리진으로 설정하고 짧은 TTL로 동적 콘텐츠를 캐싱하여 백엔드 부하 감소와 성능 향상을 모두 달성합니다. Global Accelerator는 캐싱 기능이 없으므로 이 시나리오에 부적합합니다.

- **핵심 개념: 다중 오리진을 사용하는 CloudFront 아키텍처**
| 컴포넌트 | 역할 | 처리하는 콘텐츠 |
| :--- | :--- | :--- |
| **Amazon S3** | **정적 콘텐츠 오리진** | 이미지, CSS, JavaScript 파일 |
| **ALB / EC2** | **동적 콘텐츠 오리진** | HTML 페이지, API 응답 |
| **Amazon CloudFront** | **단일 진입점 및 글로벌 캐시/라우터** | 모든 사용자 요청을 수신하고, 경로에 따라 적절한 오리진으로 라우팅 및 캐싱 |

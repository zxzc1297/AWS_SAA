# 문제 풀이 노트 (41-44편)

[↩️ 메인으로 돌아가기](../README.md)

---

## 문제 41: EC2에 설치된 단일 데이터베이스의 고가용성 및 재해 복구 강화

> **시나리오:**
> 한 회사는 비즈니스에 필수적인 애플리케이션의 데이터베이스를 단일 Amazon EC2 인스턴스에서 직접 설치한 MySQL로 운영하고 있습니다. 데이터는 연결된 EBS 볼륨에 저장되며, 일주일에 한 번씩 EBS 스냅샷을 생성하여 수동으로 백업하고 있습니다. 최근 EC2 인스턴스에 장애가 발생하여 심각한 서비스 중단을 겪었고, 가장 최신 스냅샷으로 복구하는 과정에서 거의 하루치 데이터가 유실되었습니다.
>
> **요구사항:**
> 1.  **고가용성(HA):** 데이터베이스는 단일 컴포넌트 또는 하나의 가용 영역(AZ) 전체에 장애가 발생하더라도 서비스를 지속할 수 있어야 합니다.
> 2.  **데이터 손실 최소화:** 복구 시점 목표(RPO)는 5분 미만이어야 합니다.
> 3.  **빠른 복구:** 복구 시간 목표(RTO)는 가능한 한 짧아야 하며, 이상적으로는 10분 미만이어야 합니다.
> 4.  **관리형 솔루션:** 데이터베이스 인프라(패치, 백업, 스케일링 등) 관리의 운영 부담을 줄이고 싶습니다.
>
> **문제:**
> 이러한 요구사항을 가장 효과적으로 충족하는 솔루션은 무엇입니까?
>
> A. 데이터베이스를 Amazon RDS for MySQL 다중 AZ(Multi-AZ) DB 인스턴스로 마이그레이션합니다. 1일의 보존 기간으로 자동 백업을 활성화하고 특정 시점 복구(Point-in-Time Recovery)를 구성합니다.
> B. 데이터베이스를 Amazon RDS for MySQL로 마이그레이션하고, 다른 가용 영역에 읽기 전용 복제본(Read Replica)을 생성합니다.
> C. 데이터베이스를 계속 EC2에서 운영합니다. Auto Scaling 그룹을 구성하여 인스턴스 장애 시 새 인스턴스를 시작하고 기존 EBS 볼륨을 다시 연결하도록 합니다.
> D. 데이터베이스를 Amazon Aurora Serverless v2로 마이그레이션하여 고가용성과 자동 스케일링을 확보합니다.

### 풀이 및 정리

✅ **정답: A**

- **솔루션 분석:** 해결책은 EC2 기반 자체 관리형 데이터베이스가 가진 가용성, RPO, RTO 및 운영 오버헤드 문제를 해결해야 합니다. **Amazon RDS 다중 AZ(Multi-AZ)**는 동기식 복제와 자동 장애 조치를 통해 낮은 RPO/RTO와 고가용성을 제공하는 완전 관리형 서비스이므로 모든 요구사항을 충족합니다. 읽기 전용 복제본은 비동기식 복제이므로 HA가 아닌 읽기 확장용입니다.

- **핵심 개념: RDS 다중 AZ vs. 읽기 전용 복제본**
| 구분              | **다중 AZ (Multi-AZ)** | **읽기 전용 복제본 (Read Replica)** |
| :---------------- | :--------------------------------------------------------- | :-------------------------------------------------------------- |
| **주요 목적** | **고가용성 (High Availability), 재해 복구** | **성능 향상 (Read-heavy 워크로드 확장)** |
| **복제 방식** | **동기식 (Synchronous)** | **비동기식 (Asynchronous)** |
| **장애 조치** | **자동 (Automatic)**, 약 1-2분 소요                        | **수동 (Manual)**, 관리자가 직접 승격 필요                      |
| **엔드포인트** | 기본 DB 엔드포인트 유지 (DNS CNAME 변경)                     | 고유의 엔드포인트를 가짐                                        |
| **데이터 손실** | 거의 없음 (Near-zero RPO)                                  | 복제 지연(Lag)만큼 발생 가능 (RPO가 수 초~수 분)                |
| **사용 사례** | 운영 DB의 안정성 및 내결함성 확보                            | BI 툴, 분석 쿼리, 웹사이트 읽기 트래픽 분산                      |


---

## 문제 42: 온프레미스 Active Directory 사용자의 AWS 콘솔 접근 연동

> **시나리오:**
> 한 기업의 모든 임직원 계정은 온프레미스(사내 데이터 센터)에 있는 Microsoft Active Directory(AD)에서 중앙 관리되고 있습니다. 회사의 보안 정책에 따라, 임직원들은 AWS 리소스를 관리하기 위해 AWS Management Console에 로그인할 때, 각 개인별로 새로운 IAM 사용자를 생성하는 대신 기존의 회사 AD 계정(자격 증명)을 그대로 사용해야 합니다.
>
> **요구사항:**
> 1.  임직원은 기존 온프레미스 AD 자격 증명을 사용하여 AWS Management Console에 접근해야 한다.
> 2.  각 임직원별로 별도의 IAM 사용자를 생성하고 싶지 않다.
> 3.  솔루션은 안전해야 하며, AD 그룹을 기반으로 AWS의 특정 역할(Role)을 부여받는 중앙 집중식 접근 제어 모델을 따라야 한다.
> 4.  가능하다면 AWS에서 권장하는 최신 모범 사례를 따르고자 한다.
>
> **문제:**
> 이러한 요구사항을 가장 잘 충족하는 솔루션은 무엇입니까?
>
> A. AWS Directory Service for Microsoft Active Directory(AWS Managed Microsoft AD)를 사용하여 클라우드에 새로운 AD를 구축합니다.
> B. AWS IAM Identity Center(AWS Single Sign-On의 후속 서비스)를 설정하고, 외부 자격 증명 공급자(Identity Source)로 온프레미스 Active Directory를 지정합니다.
> C. 온프레미스에 Active Directory Federation Services(AD FS)를 배포하고, AWS IAM에서 ID 공급자(IdP)를 수동으로 구성합니다.
> D. 각 임직원별로 AWS에 IAM 사용자를 생성합니다.

### 풀이 및 정리

✅ **정답: B**

- **솔루션 분석:** 이 시나리오는 외부 ID 공급자(IdP)와의 연동(Federation)을 요구합니다. **AWS IAM Identity Center**는 이러한 연동을 간소화하고 다중 계정 환경에서 권한을 중앙 집중식으로 관리하기 위한 AWS의 최신 권장 서비스입니다. 기존 온프레미스 AD를 자격 증명 소스로 직접 연결하고, AD 그룹을 권한 세트(Permission Set)에 매핑하여 효율적인 접근 제어를 구현할 수 있습니다. AD FS를 수동으로 구성하는 것보다 설정 및 관리가 훨씬 간편합니다.

- **핵심 개념: AWS 접근 연동 방식 비교**
| 방식 | **AWS IAM Identity Center** | **IAM IdP 직접 연동 (AD FS 방식)** |
| :--- | :--- | :--- |
| **관리 방식** | **중앙 집중식, 간소화** | **개별 설정, 분산 관리** |
| **설정 복잡도** | 낮음 (마법사 기반의 간단한 설정) | 높음 (AD FS 배포, SAML 설정, 신뢰 관계 수동 구성) |
| **AWS 권장 사항**| **강력히 권장하는 모범 사례** | 전통적인 방식 (여전히 유효함) |
| **주요 사용 사례** | 다중 계정 환경에서의 SSO 및 권한 중앙 관리 | 특정 연동 요구사항을 세밀하게 제어해야 할 경우 |


---

## 문제 43: 안정적인 24/7 워크로드의 EC2 비용 최적화

> **시나리오:**
> 한 회사는 연중무휴 24시간 동안 일관된 수준의 컴퓨팅 파워를 요구하는 데이터 분석 플랫폼을 온디맨드(On-Demand) EC2 인스턴스로 운영하고 있습니다. 향후 1~3년간 필요한 최소 컴퓨팅 용량을 정확하게 예측하고 있으며, EC2 요금을 대폭 절감하고자 합니다.
>
> **요구사항:**
> 1.  안정적이고 장기적인 워크로드에 대한 EC2 비용을 가장 효과적으로 절감해야 합니다.
> 2.  솔루션은 애플리케이션의 성능이나 가용성을 저하시키지 않아야 합니다.
>
> **문제:**
> 이러한 요구사항을 충족하기 위한 가장 좋은 방법은 무엇입니까?
>
> A. 전체 EC2 인스턴스 그룹을 스팟 인스턴스(Spot Instances)로 전환합니다.
> B. 예측 가능한 기준 사용량을 충당하기 위해 1년 또는 3년 약정의 컴퓨팅 비용 절감 계획(Compute Savings Plan)을 구매합니다.
> C. EC2 Auto Scaling 정책을 구현하여 사용량이 적은 시간에 인스턴스 수를 줄입니다.
> D. 특정 인스턴스 사양에 맞는 표준 예약 인스턴스(Standard Reserved Instances)를 구매합니다.

### 풀이 및 정리

✅ **정답: B**

- **솔루션 분석:** 예측 가능하고 안정적인 장기 워크로드의 비용을 최적화하는 가장 현대적이고 유연한 방법은 **비용 절감 계획(Savings Plans)**을 사용하는 것입니다. 이는 사용량($/hour)에 대한 약정을 대가로 온디맨드 대비 큰 폭의 할인을 제공하는 순수 결제 모델입니다. 특히 **컴퓨팅 비용 절감 계획**은 인스턴스 패밀리, 리전, OS 등에 제약 없이 할인이 적용되므로, 특정 사양에 묶이는 표준 예약 인스턴스(Standard RIs)보다 훨씬 유연합니다. 스팟 인스턴스는 중단 가능성 때문에 안정적인 워크로드에 부적합합니다.

- **핵심 개념: EC2 구매 옵션 비교**
| 구매 옵션                       | **온디맨드 (On-Demand)** | **비용 절감 계획 (Savings Plans)** | **예약 인스턴스 (Reserved Instances)** | **스팟 인스턴스 (Spot Instances)** |
| :------------------------------ | :------------------------------------------- | :----------------------------------------- | :--------------------------------------- | :----------------------------------------- |
| **비용 절감** | 없음                                         | **큼 (최대 72%)** | 큼 (최대 72%)                            | **가장 큼 (최대 90%)** |
| **약정** | 없음                                         | 1년 또는 3년 약정                          | 1년 또는 3년 약정                        | 없음                                       |
| **유연성** | 매우 높음                                    | **매우 높음 (컴퓨팅/EC2 인스턴스 SP)** | 낮음 (표준 RI) ~ 중간 (컨버터블 RI)      | 높음                                       |
| **중단 가능성** | 없음                                         | 없음                                       | 없음                                     | **있음 (2분 전 통보)** |
| **최적 워크로드** | 예측 불가능한 단기 워크로드                  | **예측 가능한 안정적인 워크로드 (권장)** | 예측 가능한 안정적인 워크로드            | 내결함성이 있고 중단 가능한 워크로드       |


---

## 문제 44: 읽기 집약적인 데이터베이스 워크로드의 성능 개선

> **시나리오:**
> 한 인기 소셜 미디어 애플리케이션의 RDS 데이터베이스에 과도한 읽기(Read) 요청이 몰리면서 성능 저하가 발생하고 있습니다. 가장 자주 접근하는 데이터는 사용자 프로필, 친구 목록 등이며, 이 데이터들은 자주 변경되지 않습니다.
>
> **요구사항:**
> 1.  애플리케이션의 읽기 성능을 개선하고 응답 시간을 단축해야 합니다.
> 2.  RDS 데이터베이스의 부하를 가장 효과적인 방법으로 줄여야 합니다.
>
> **문제:**
> 이러한 요구사항을 가장 잘 충족하는 솔루션은 무엇입니까?
>
> A. Amazon RDS 인스턴스를 더 큰 인스턴스 클래스로 수직 확장(Scale-up)합니다.
> B. Amazon RDS 읽기 전용 복제본(Read Replica)을 생성하여 읽기 쿼리를 분산합니다.
> C. Amazon ElastiCache for Redis 클러스터를 배포하여 'Cache-Aside' 패턴으로 캐싱을 구현합니다.
> D. Application Load Balancer 앞에 Amazon CloudFront를 배포하여 동적 콘텐츠를 캐싱합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** 시나리오는 '자주 접근하지만 자주 변경되지 않는 데이터'로 인한 읽기 병목 현상을 설명합니다. 이는 인메모리 캐싱 전략이 가장 효과적인 전형적인 사례입니다. **Amazon ElastiCache**를 도입하여 데이터베이스 앞단에 캐시 계층을 두면, 반복적인 읽기 요청을 메모리에서 마이크로초 단위의 속도로 처리할 수 있습니다. 이를 통해 데이터베이스의 부하를 직접적으로 줄이고 애플리케이션 응답 시간을 크게 단축시킬 수 있습니다. 읽기 전용 복제본도 유효한 읽기 확장 전략이지만, 이 시나리오처럼 특정 '핫 데이터'에 대한 반복 조회에는 캐시가 더 효율적이고 빠릅니다.

- **핵심 개념: DB 읽기 성능 개선 전략 비교**
| 전략 | **수직 확장 (Scale Up)** | **읽기 전용 복제본 (Read Replica)** | **인메모리 캐시 (In-Memory Cache)** |
| :--- | :--- | :--- | :--- |
| **방법** | DB 인스턴스 사양 올리기 (vCPU, RAM↑) | DB 복사본을 만들어 읽기 쿼리 분산 | 자주 쓰는 데이터를 메모리에 저장 |
| **응답 속도** | 개선됨 (밀리초) | 개선됨 (밀리초) | **가장 빠름 (마이크로초/서브밀리초)** |
| **DB 부하** | 감소 효과 없음 (쿼리 수는 동일) | **감소** (읽기 쿼리가 분산됨) | **가장 크게 감소** (DB 조회 자체를 막음) |
| **최적 사용 사례**| 모든 종류의 쿼리 성능이 전반적으로 저하될 때 | 다양한 종류의 읽기 쿼리가 많을 때 | **동일한 데이터를 반복적으로 읽는 쿼리가 많을 때** |

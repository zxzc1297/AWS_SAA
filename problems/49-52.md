# 문제 풀이 노트 (49-52편)

[↩️ 메인으로 돌아가기](../README.md)

---

## 문제 49: 리전 장애에 대비한 웹 애플리케이션 재해 복구(DR) 전략

> **시나리오:**
> 한 기업의 핵심 이커머스 웹사이트는 현재 서울 리전(ap-northeast-2) 한 곳에서 운영되고 있습니다. 비즈니스 연속성 계획의 일환으로, 서울 리전 전체에 장애가 발생하더라도 서비스를 복구할 수 있는 재해 복구(DR) 전략을 수립해야 합니다.
>
> **재해 복구 목표:**
> 1.  **복구 시간 목표(RTO):** 1시간 미만
> 2.  **복구 시점 목표(RPO):** 15분 미만
>
> **문제:**
> 명시된 RTO 및 RPO 목표를 충족하는 가장 비용 효율적인 재해 복구 전략은 무엇입니까?
>
> A. 매일 RDS 데이터베이스의 스냅샷을 생성하고 DR 리전으로 복사하여, 재해 발생 시 수동으로 복원합니다.
> B. DR 리전에 최소 사양의 '파일럿 라이트' EC2 인스턴스 하나만 실행하고, RDS 읽기 전용 복제본을 유지합니다.
> C. DR 리전에 축소된 규모의 완전한 애플리케이션 스택을 배포하고, **Amazon Aurora Global Database**를 사용하여 복제합니다. 재해 발생 시, **Amazon Route 53**을 사용하여 트래픽을 전환합니다.
> D. 주 리전과 DR 리전에 동일한 규모의 프로덕션 환경을 각각 배포하고, 두 리전에서 동시에 활성 상태로 서비스를 제공합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** 해결책은 명시된 RTO(<1시간) 및 RPO(<15분)를 만족하는 가장 비용 효율적인 DR 전략이어야 합니다. **웜 스탠바이(Warm Standby)**는 DR 리전에 축소된 인프라를 상시 운영하여 빠른 RTO를 달성하고, **Aurora Global Database**의 1초 미만 복제 지연 시간으로 낮은 RPO를 충족합니다. 이는 백업/복구 및 파일럿 라이트보다 빠르고, 액티브-액티브보다 저렴하여 주어진 요구사항에 가장 적합합니다.

- **핵심 개념: AWS 재해 복구(DR) 전략 비교**
| DR 전략 (Strategy) | 설명 (Description) | 일반적인 RTO / RPO | 상대적 비용 (Cost) |
| :--- | :--- | :--- | :--- |
| **백업 및 복구** | 데이터만 다른 리전에 백업. 장애 시 처음부터 인프라 구축. | 수 시간 (Hours) | **매우 낮음 (Lowest)** |
| **파일럿 라이트** | 핵심 인프라(DB 복제 등)만 유지. 장애 시 전체 인프라 가동. | 수십 분 (Tens of Minutes) | 낮음 (Low) |
| **웜 스탠바이** | 축소된 버전의 인프라를 항상 실행. 장애 시 확장 및 트래픽 전환. | 수 분 (Minutes) | 중간 (Medium) |
| **멀티사이트 액티브/액티브** | 두 리전에서 전체 인프라를 동시에 실행. | 거의 0 (Near-zero) | **매우 높음 (Highest)** |


---

## 문제 50: 웹 애플리케이션 보안 강화를 위한 엣지(Edge) 서비스 활용

> **시나리오:**
> 한 회사의 공개 웹 애플리케이션이 대규모 디도스(DDoS) 공격과 SQL 인젝션(SQL Injection) 공격 시도를 받았습니다. 회사는 이러한 공격에 효과적으로 대응하기 위해 보안을 강화하고자 합니다.
>
> **요구사항:**
> 1.  **DDoS 보호:** 일반적인 대규모 DDoS 공격을 자동으로 방어할 수 있는 관리형 서비스를 도입해야 합니다.
> 2.  **웹 애플리케이션 방화벽:** SQL 인젝션, 교차 사이트 스크립팅(XSS)과 같은 일반적인 웹 공격을 차단해야 합니다.
> 3.  **중앙 관리:** 보안 규칙은 AWS 네트워크의 엣지에서 적용되어야 합니다.
>
> **문제:**
> 이러한 요구사항을 가장 효과적으로 충족하는 솔루션은 무엇입니까?
>
> A. 각 EC2 인스턴스에 서드파티 호스트 기반 IDS/IPS 소프트웨어를 설치하고, 네트워크 ACL(NACL)로 IP를 차단합니다.
> B. **AWS WAF** 웹 ACL을 생성하여 ALB에 연결하고 관리형 규칙을 활성화합니다. DDoS 보호 강화를 위해 **AWS Shield Advanced**를 구독하고 ALB를 보호합니다.
> C. VPC에 **AWS Network Firewall**을 배포하여 모든 트래픽을 검사합니다.
> D. ALB 앞에 **Amazon CloudFront**를 배포하고, 기본으로 활성화되는 AWS Shield Standard에 의존합니다.

### 풀이 및 정리

✅ **정답: B**

- **솔루션 분석:** 다계층 보안(Defense in Depth)을 위해 각 위협에 특화된 서비스를 조합하는 것이 가장 효과적입니다. **AWS Shield Advanced**는 정교한 대규모 DDoS(L3/L4) 공격에 대한 관리형 보호를 제공합니다. **AWS WAF**는 SQL 인젝션, XSS와 같은 웹 애플리케이션(L7) 공격을 필터링하는 데 특화된 서비스입니다. 이 두 서비스를 ALB와 같은 엣지 리소스에 적용하는 것이 표준적인 모범 사례입니다.

- **핵심 개념: AWS 네트워크 보안 서비스 비교**
| 서비스 (Service) | 보호 계층 (Layer) | 주요 보호 대상 (Primary Target) | 핵심 기능 (Key Feature) |
| :--- | :--- | :--- | :--- |
| **AWS Shield** | L3/L4 (네트워크/전송) | **DDoS 공격** (UDP Flood, SYN Flood 등) | 대규모 트래픽 공격 방어, 인프라 보호 |
| **AWS WAF** | L7 (애플리케이션) | **웹 애플리케이션 공격** (SQL Injection, XSS) | HTTP/HTTPS 트래픽 검사 및 필터링 |
| **AWS Network Firewall**| L3-L7 (VPC 네트워크) | VPC 경계의 모든 In/Outbound 트래픽 | Stateful 패킷 검사, IDS/IPS 규칙 |


---

## 문제 51: 데이터 기반 분석을 통한 Lambda 함수 비용 최적화

> **시나리오:**
> 한 이미지 처리 서비스의 Lambda 함수가 1024MB 메모리로 설정되어 있으나, 실제 최대 사용량은 256MB 미만으로 확인되었습니다. 이로 인해 불필요하게 높은 비용이 발생하고 있습니다.
>
> **요구사항:**
> 1.  Lambda 함수의 비용을 대폭 절감해야 합니다.
> 2.  이미지 처리 성능에 부정적인 영향을 주어서는 안 됩니다.
> 3.  솔루션은 데이터에 기반한 분석을 통해 도출되어야 합니다.
>
> **문제:**
> 이러한 요구사항을 가장 잘 충족하는 조치는 무엇입니까?
>
> A. Lambda 함수의 메모리 할당량을 2048MB로 늘립니다.
> B. Lambda 함수에 대해 예약된 동시성(Reserved Concurrency)을 설정합니다.
> C. AWS Lambda Power Tuning과 같은 도구를 사용하여 다양한 메모리 설정으로 함수를 실행하고, 비용과 성능의 균형이 가장 좋은 최적의 메모리 크기를 찾아 함수 설정을 조정합니다.
> D. 현재 Python으로 작성된 이미지 처리 로직을 Go나 Rust와 같이 성능이 더 뛰어난 언어로 다시 작성합니다.

### 풀이 및 정리

✅ **정답: C**

- **솔루션 분석:** Lambda 비용은 할당된 메모리와 실행 시간의 곱(GB-초)으로 결정됩니다. 로그 분석 결과 명백한 메모리 과다 할당이 확인되었으므로, 데이터에 기반하여 최적의 메모리 크기를 찾는 것이 가장 합리적인 접근 방식입니다. **AWS Lambda Power Tuning**과 같은 도구는 다양한 메모리 구성에 대한 성능 및 비용 데이터를 자동으로 수집하여, 가장 비용 효율적인 '최적점(sweet spot)'을 찾아주는 모범 사례입니다.

- **핵심 개념: AWS Lambda 비용 최적화**
| 최적화 방법 | 설명 | 언제 사용하는가 |
| :--- | :--- | :--- |
| **메모리 튜닝** | **성능/비용의 최적점을 찾기 위해 메모리 설정을 조정 (CPU도 함께 조정됨)** | **모든 Lambda 함수 최적화의 첫 단계** |
| **코드 최적화** | 라이브러리 최적화, 언어 변경, 로직 개선 등으로 실행 시간 단축 | 메모리 튜닝 후에도 비용/성능 목표를 달성하지 못할 때 |
| **아키텍처 변경** | Step Functions, SQS 연동 등으로 함수 로직을 분리하거나 변경 | 함수의 책임이 너무 크거나 복잡할 때 |


---

## 문제 52: 하이브리드 환경의 트래픽 분산 및 자동 장애 조치

> **시나리오:**
> 온프레미스와 AWS에 애플리케이션을 동시에 운영하는 하이브리드 환경을 구성하고 있습니다. 전체 트래픽의 20%는 AWS로, 80%는 온프레미스로 보내고, 한쪽 환경에 장애가 발생하면 다른 쪽으로 모든 트래픽을 자동 전환해야 합니다.
>
> **요구사항:**
> 1.  트래픽을 지정된 비율로 분산해야 합니다.
> 2.  한쪽 환경의 장애 시 자동으로 트래픽을 전환해야 합니다.
> 3.  단일 AWS 서비스를 통해 DNS를 중앙 관리해야 합니다.
>
> **문제:**
> 이러한 요구사항을 모두 충족하는 가장 적절한 솔루션은 무엇입니까?
>
> A. Amazon Route 53에서 장애 조치(Failover) 라우팅 정책을 구성합니다.
> B. Amazon Route 53에서 **가중치(Weighted) 라우팅 정책**을 구성하고, 각 엔드포인트에 대해 **Route 53 상태 확인(Health Check)**을 생성하고 연결합니다.
> C. Application Load Balancer의 대상 그룹 가중치를 사용하여 트래픽을 분산합니다.
> D. AWS Global Accelerator의 트래픽 다이얼을 사용하여 트래픽을 조정합니다.

### 풀이 및 정리

✅ **정답: B**

- **솔루션 분석:** 이 시나리오는 DNS 레벨에서 트래픽을 제어해야 하는 명확한 요구사항을 제시합니다. **Amazon Route 53**은 이를 위한 최적의 서비스입니다. **가중치 라우팅 정책**은 지정된 비율로 트래픽을 분산하는 기능을 제공하며, **Route 53 상태 확인**은 엔드포인트의 상태를 모니터링하여 장애 발생 시 자동으로 해당 엔드포인트를 라우팅에서 제외합니다. 이 조합은 요구사항을 가장 안정적이고 직접적으로 충족합니다. ALB를 사용하는 것은 ALB 자체의 장애 시 단일 장애 지점이 되는 위험이 있습니다.

- **핵심 개념: Amazon Route 53 주요 라우팅 정책**
| 라우팅 정책 | **단순 (Simple)** | **가중치 (Weighted)** | **장애 조치 (Failover)** | **지연 시간 (Latency)** | **지리 위치 (Geolocation)** |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **주요 사용 사례**| 단일 리소스에 대한 기본 DNS | **트래픽 비율 분산** (A/B 테스트, 점진적 배포) | **Active-Passive DR** | 최저 지연 시간의 리전으로 라우팅 | 사용자 지리적 위치 기반 라우팅 |
| **상태 확인** | 지원 안 함 | **지원** | **지원** | 지원 | 지원 안 함 |
